<?xml version="1.0"?>
<odoo>
    <data>
        <template id="calatayud_document_format.report_invoice_document_inherit"
                  inherit_id="account.report_invoice_document">
            <xpath expr="//table[@name='invoice_line_table']/thead[1]/tr[1]/th[1]" position="replace">
                <th name="th_description_product" class="text-start">
                    <span>Descripción</span>
                </th>
            </xpath>
            <!--description-->
            <xpath expr="//table[@name='invoice_line_table']/thead[1]/tr[1]/th[1]" position="before">
                <th name="th_product_name" class="text-start">
                    <span>Nombre</span>
                </th>
            </xpath>
            <!--TABLE BODY-->
            <!--product name-->
            <xpath expr="//table[@name='invoice_line_table']/tbody/t/tr/t[1]/td[1]" position="replace">
                <td name="td_product_name">
                    <span t-esc="line.product_line_name" style="font-size:12px"/>

                    <!--                    <span-->
                    <!--                        t-esc="line.name.rsplit(']',1)[-1].rsplit(')',1)[0] + ')' if ']' in line.name and ')' in line.name.rsplit(']',1)[-1] else (line.name.rsplit(')',1)[0] + ')' if ')' in line.name else line.name)"-->
                    <!--                        style="font-size:12px"/>-->
                </td>
            </xpath>
            <!--description-->
            <xpath expr="//table[@name='invoice_line_table']/tbody/t/tr/t[1]/td[2]" position="replace">
                <td name="td_product_description">
                    <span t-esc="line.product_line_description" style="font-size:12px"/>

                    <!--                  <t t-set="name_num" t-value="line.name.find(')') + 1"/>-->
                    <!--                  <t t-set="product_desc" t-value="line.name[name_num:]"/>-->
                    <!--                  <span t-esc="product_desc" style="font-size:12px"/>-->

                    <!--                    <span t-esc="line.name.split(')',1)[-1] if ')' in line.name else line.name"-->
                    <!--                          style="font-size:12px"/>-->

                </td>
            </xpath>

            <xpath expr="//table[@name='invoice_line_table']/tbody/t/tr/t[1]/td[2]" position="after">
                <td name="td_quantity_product" style="text-align:right;">
                    <span t-field="line.quantity" style="font-size:12px"/>
                </td>
            </xpath>

            <xpath expr="//table[@name='invoice_line_table']/tbody/t/tr/t[1]/td[4]" position="replace">
                <td name="td_price_unit_product" style="text-align:right;">
                    <span t-field="line.price_unit" style="font-size:12px"/>
                </td>
            </xpath>

            <xpath expr="//table[@name='invoice_line_table']/tbody/t/tr/t[1]/td[6]" position="replace">
                <td t-if="display_discount" name="td_discount" style="text-align:right;">
                    <span class="text-nowrap" t-field="line.discount" style="font-size:12px"/>
                </td>
            </xpath>

            <xpath expr="//table[@name='invoice_line_table']/tbody/t/tr/t[1]/td[7]" position="replace">
                <td name="td_price_subtotal_product" style="text-align:right;">
                    <span t-field="line.price_subtotal" style="font-size:12px"/>
                </td>
            </xpath>


            <xpath expr="//table[@name='invoice_line_table']/thead/tr/th[@name='th_priceunit']" position="replace">
                <th name="th_priceunit"
                    t-attf-class="text-end {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                    <span>Precio</span>
                </th>
            </xpath>
            <xpath expr="//table[@name='invoice_line_table']/thead/tr/th[@name='th_taxes']" position="replace"/>
            <xpath
                expr="//table[@name='invoice_line_table']/tbody/t/tr/t[@name='account_invoice_line_accountable']/td[5]"
                position="replace"/>

            <xpath expr="//div[@class='clearfix mb-4']" position="after">
                <t t-if="o.payment_mode_id">
                    <div class="row mt32">
                        <div class="col-8">
                            <strong>Método de Pago:</strong>
                            <span t-field="o.payment_mode_id" style="font-size:12px"/>
                        </div>

                    </div>
                </t>
            </xpath>

<!--            <xpath expr="//div[@name='shipping_address_block']" position="replace">-->
<!--                <div groups="account.group_delivery_invoice_address" name="shipping_address_block">-->
<!--                    <strong>Shipping Address:</strong>-->
<!--                    <div t-field="o.partner_shipping_id"-->
<!--                         t-options='{"widget": "contact_extension", "fields": ["address","state","prueba","name"], "no_marker": True}'/>-->
<!--                </div>-->
<!--            </xpath>-->
        </template>
    </data>
</odoo>
