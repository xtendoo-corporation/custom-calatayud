<?xml version="1.0"?>
<odoo>
    <data>
        <template id="calatayud_document_format.report_invoice_document_inherit"
                  inherit_id="account.report_invoice_document">
            <xpath expr="//table[@name='invoice_line_table']/thead[1]/tr[1]/th[1]" position="replace">
                <th name="th_description_product" class="text-start">
                    <span>Descripción</span>
                </th>
            </xpath>
            <!--description-->
            <xpath expr="//table[@name='invoice_line_table']/thead[1]/tr[1]/th[1]" position="before">
                <th name="th_product_name" class="text-start">
                    <span>Nombre</span>
                </th>
            </xpath>
            <!--TABLE BODY-->
            <!--product name-->
            <xpath expr="//table[@name='invoice_line_table']/tbody/t/tr/t[1]/td[1]" position="replace">
                <td name="td_product_name">
                    <span t-esc="line.product_line_name" style="font-size:12px"/>
                </td>
            </xpath>
            <!--description-->
            <xpath expr="//table[@name='invoice_line_table']/tbody/t/tr/t[1]/td[2]" position="replace">
                <td name="td_product_description">
                    <span t-esc="line.product_line_description" style="font-size:12px"/>
                </td>
            </xpath>

            <xpath expr="//table[@name='invoice_line_table']/tbody/t/tr/t[1]/td[2]" position="after">
                <td name="td_quantity_product" style="text-align:right;">
                    <span t-field="line.quantity" style="font-size:12px"/>
                </td>
            </xpath>

            <xpath expr="//table[@name='invoice_line_table']/tbody/t/tr/t[1]/td[4]" position="replace">
                <td name="td_price_unit_product" style="text-align:right;">
                    <span t-field="line.price_unit" style="font-size:12px"/>
                </td>
            </xpath>

            <xpath expr="//table[@name='invoice_line_table']/tbody/t/tr/t[1]/td[6]" position="replace">
                <td t-if="display_discount" name="td_discount" style="text-align:right;">
                    <span class="text-nowrap" t-field="line.discount" style="font-size:12px"/>
                </td>
            </xpath>

            <xpath expr="//table[@name='invoice_line_table']/tbody/t/tr/t[1]/td[7]" position="replace">
                <td name="td_price_subtotal_product" style="text-align:right;">
                    <span t-field="line.price_subtotal" style="font-size:12px"/>
                </td>
            </xpath>

            <xpath expr="//table[@name='invoice_line_table']/thead/tr/th[@name='th_priceunit']" position="replace">
                <th name="th_priceunit"
                    t-attf-class="text-end {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                    <span>Precio</span>
                </th>
            </xpath>

            <xpath expr="//table[@name='invoice_line_table']/thead/tr/th[@name='th_taxes']" position="replace"/>

            <xpath
                expr="//table[@name='invoice_line_table']/tbody/t/tr/t[@name='account_invoice_line_accountable']/td[5]"
                position="replace"/>

            <xpath expr="//p[@name='payment_communication']" position="attributes">
                <attribute name="t-if">o.move_type in ('out_invoice', 'in_refund') and o.payment_reference and
                    o.payment_mode_id.name != 'Remesa bancaria'
                </attribute>
            </xpath>

            <xpath expr="//div[@id='informations']" position="after">
                <div id="paymentmode_and_reference" class="row mt-4 mb-4">
                    <div class="col-auto col-3 mw-100 mb-2">
                        <strong>Método de Pago:</strong>
                        <p class="m-0" t-field="o.payment_mode_id"/>
                    </div>
                    <div class="col-auto col-3 mw-100 mb-2">
                        <strong>Origen:</strong>
                        <p class="m-0" t-field="o.invoice_origin"/>
                    </div>
                </div>
            </xpath>

            <xpath expr="//div[@name='origin']" position="replace">
            </xpath>

            <xpath expr="//div[@name='address_same_as_shipping']" position="replace">
                <t t-set="address">
                    <address class="mb-0"
                             t-field="o.partner_id"
                             t-options='{"widget": "contact", "fields": ["address", "name", "state"], "no_marker": True}'/>
                    <div t-if="o.partner_id.vat" id="partner_vat_address_same_as_shipping">
                        <t t-if="o.company_id.account_fiscal_country_id.vat_label"
                           t-esc="o.company_id.account_fiscal_country_id.vat_label"
                           id="inv_tax_id_label"/>
                        <t t-else="">Tax ID</t>:
                        <span t-field="o.partner_id.vat"/>
                    </div>
                </t>
            </xpath>
            <xpath expr="//div[@class='clearfix mb-4']" position="after">
                <span t-if="env.context.get('proforma', False) or is_pro_forma or o.payment_mode_id.name != 'Remesa bancaria'">
                    <strong>Forma de pago:</strong>
                    <t t-if="o.company_id.name == 'La Tienda de Calatayud S.L.'">
                        Banco Santander : ES76 0049 5907 4423 1608 6239
                    </t>
                    <t t-else="">
                        Banco Santander : ES30 0049 5907 4324 1608 5968
                    </t>
                </span>
            </xpath>
        </template>

<!--         <template id="calatayud_document_format.external_layout_boxed_inherit" inherit_id="web.external_layout_boxed">-->
<!--            <xpath expr="//div[@t-field='company.report_footer']" position="after">-->
<!--                 <t t-if="o.company_id.name == 'Almacenes Calatayud S.L.'">-->
<!--                <img src="/calatayud_document_format/static/src/img/sello_calatayud_almacen.png" alt="Sello de Calatayud" width="100"/>-->
<!--                 </t>-->
<!--            </xpath>-->
<!--        </template>-->
    </data>
</odoo>
